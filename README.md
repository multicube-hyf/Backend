# Backend
## API Documentation

---

**URL** https://multicube-backend.herokuapp.com/

---

> Values required in **`bold`**.

### **USERS** | `user`

| field         | data type        | metadata                    |
| :------------ | :--------------- | :-------------------------- |
| _id           | unsigned integer | generated by database       |
| username      | string           | required, unique            |
| email         | string           | unique                      |
| password      | string           | required                    |
| name          | string           | required                    |
| lastName      | string           | required                    |
| phone         | string           |                             |
| role          | string           | required                    |
| created_at    | datetime         | generated by database       |
| updated_at    | datetime         | generated by database       |


### **USERS** | `student`

| field           | data type        | metadata                    |
| :-------------- | :--------------- | :-------------------------- |
| gender          | string           | required                    |
| dad_name        | string           |                             |
| dad_lastName    | string           |                             |
| mom_name        | string           |                             |
| mom_lastName    | string           |                             |
| last_connection | datetime         | generated by server         |

#### Add an user

**`POST /api/user`**

##### Request

A json object for the user to register with **`username`**, **`name`**, **`lastName`**, **`email`**, **`password`**, **`role`** and `phone`.

```
{
  "username": "Larizaak",
  "name": "Isaak",
  "lastName": "Larsen"
  "email": "izaak@example.com",
  "password": "really-strong-password",
  "role": "admin",
  "phone": "+xx xxx xx xx xx"
  
}
```

##### Response `201`

A json object for the registered user with `ok`, `_id`, `username`,  `email`, `name`, `lastName`, `role` and `token`. 

```
{
  "ok": true,
  "user": {
    "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
    "username": "larizaak",
    "email": "izaak@example.com",
    "name": "Isaak",
    "lastName": "Larsen",
    "role": "admin",
    "created_at": "2025-07-05T14:30:00Z"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1CJlbWFpbCI6ImphY2tAZXc2VybmFtZSI6ImphY2siLhhbXBsZS5jb20iLCJpYXQiOjE1OTg2MTc2MTksImV4cCI6MTYwMTIwOTYxOX0.s85ti_rzBVHJ6Gt1MY7seYfdcjB6sR939p2CexA40gI"
}
```
#### Log in an user

**`POST /api/users/login`**

##### Request

A json object for the account to login with either **`username`** and **`password`** .

```
{
  "usernam": "larizaak",
  "password": "password"
}
```

##### Response `200`

A json object for the logged in account with `ok` and `token`.

```
{
  "ok": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1CJlbWFpbCI6ImphY2tAZXc2VybmFtZSI6ImphY2siLhhbXBsZS5jb20iLCJpYXQiOjE1OTg2MTc2MTksImV4cCI6MTYwMTIwOTYxOX0.s85ti_rzBVHJ6Gt1MY7seYfdcjB6sR939p2CexA40gI"
}
```

#### Update an user

**`PUT /api/users/:username`**

##### Request

A json object for the user to update with any of `username`, `email`, `password`, `phone`, `role`, `latest_time`.

```
{
  "phone": "+xx xxx xx xx xx"
  "role": "teacher"
}
```

##### Response `200`

A json object for the updated user with `ok`, `id`, `username`, `email`,  `name`,  `lastName`, `role`,   `updated_at` and `token`.

```
{
  "ok": true,
  "user": {
    "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
    "username": "larizaak",
    "email": "izaak@example.com",
    "name": "Isaak",
    "lastName": "Larsen",
    "role": "teacher"
    "updated_at": "2025-05-05T14:30:00Z"
  }.
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1CJlbWFpbCI6ImphY2tAZXc2VybmFtZSI6ImphY2siLhhbXBsZS5jb20iLCJpYXQiOjE1OTg2MTc2MTksImV4cCI6MTYwMTIwOTYxOX0.s85ti_rzBVHJ6Gt1MY7seYfdcjB6sR939p2CexA40gI"
}
```

#### Delete an user

**`DELETE /api/users/:username`**

##### Response `200`

A json object for the deleted account with confirmation message.

```
{
  "message": "User successfully deleted."
}
```

#### For users with role of type `admin`: Get a list of all the users

**`GET /api/users`**

##### Response `200`

A json object with `ok` and an array of `users`.

```
{
  "ok": true,
  "users": [
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "larizaak",
      "email": "izaak@example.com",
      "name": "Isaak",
      "lastName": "Larsen",
      "role": "teacher",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-04-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
    },
    {
      "_id": ObjectId("5f9ed5ce47d03d178d"),
      "username": "vernonB",
      "email": "benjamin@example.com",
      "name": "Vernon",
      "lastName": "Benjamin",
      "role": "admin",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2021-01-05T14:30:00Z"
      "updated_at": "2021-03-05T14:30:00Z"
    },
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "BoydH",
      "email": "harold@example.com",
      "name": "Harold",
      "lastName": "Boyd",
      "role": "student",
      "gender": "masculine"
      "dad_name": "Carl",
      "dad_lastName": "Boyd",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-01-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
      "last_connection": "2025-07-05T14:30:00Z"
    },
  ]
}
```

#### For users with role of type `admin`: Get a list of all the users with role of students

**`GET /api/users/students`**

##### Response `200`

A json object with `ok` and an array of `students`.

```
{
  "ok": true,
  "students": [
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "jaoBel",
      "email": "jao@example.com",
      "name": "Jao",
      "lastName": "Bell",
      "role": "student",
      "gender": "masculine"
      "mom_name": "Lisa",
      "mom_lastName": "Addams",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-01-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
      "last_connection": "2025-07-05T14:30:00Z"
    },
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "BoydH",
      "email": "harold@example.com",
      "name": "Harold",
      "lastName": "Boyd",
      "role": "student",
      "gender": "masculine"
      "dad_name": "Carl",
      "dad_lastName": "Boyd",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-01-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
      "last_connection": "2025-07-05T14:30:00Z"
    },
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "fisherAi",
      "email": "aiesha@example.com",
      "name": "Aiesha",
      "lastName": "Fischer",
      "role": "student",
      "gender": "feminine"
      "dad_name": "Natan",
      "dad_lastName": "Fischer",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-01-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
      "last_connection": "2025-07-05T14:30:00Z"
    },
  ]
}

```

#### For users with role of type `admin`: Get a list of all the users with role of teachers

**`GET /api/users/teachers`**

##### Response `200`

A json object with `ok` and an array of `teachers`.

```
{
  "ok": true,
  "teachers": [
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "larizaak",
      "email": "izaak@example.com",
      "name": "Isaak",
      "lastName": "Larsen",
      "role": "teacher",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-04-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
    },
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "keziaT",
      "email": "kezia@example.com",
      "name": "Kezia",
      "lastName": "Townsend",
      "role": "teacher",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-04-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
    },
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "BurtonCha",
      "email": "Charlton@example.com",
      "name": "Charlton",
      "lastName": "Burton",
      "role": "teacher",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-04-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
    },
  ]
}

```

### **CLASSROOMS** | `classroom`

| field                     | data type | metadata                                    |
| :-----------------------  | :-------- | :------------------------------------------ |
| _id                       | uuid      | generated by database                       |
| teachers_usernames        | array     | required                                    |
| students_usernames        | array     |                                             |
| title                     | string    | required                                    |
| description               | string    |                                             |
| messages                  | array     |                                             |
| created_at                | datetime  |    generated by database                    |
| updated_at                | datetime  |    generated by database                    |


#### Create a classroom

**`POST /api/classroom`**

##### Request

A json object for the classroom to create with  **`title`**, `description`, **`teachers_usernames`**, `students_usernames` and `messages`.

```
{
  "title": "Class 8",
  "description": "kids from 7 to 9 years old",
  "teachers_usernames": ["BurtonCha"],
  "students_usernames": ["fisherAi", "BoydH", "jaoBel" ],
  "messages": [
    {
      title: "first message",
      description: "This is the fist message for this class",
      author_username: "izaakL"
    }
  ] 
}

```

##### Response `201`

A json object for the created classroom with `ok`, `_id`, `title`, `description`, `teachers_usernames`, `students_usernames`, `messages`, `created_at` and `updated_at`.

```
{
  "ok": true,
  "class": {
    "_id": ObjectId("5f9ed5ce47c42738d03d178d")
    "title": "Class 8",
    "description": "kids from 7 to 9 years old",
    "teachers_usernames": ["BurtonCha"],
    "students_usernames": ["fisherAi", "BoydH", "jaoBel" ],
    "messages": [
                  {
                    title: "first message",
                    description: "This is the fist message for this class",
                    author_username: "izaakL"
                  }
                ],
    "created_at": "2025-05-05T10:00:00Z" 
    "updated_at": "" 
  }
}

```

#### Update a classroom

**`PUT /api/classrooms/:id`**

##### Request

A json object for the classroom to update with any of `title`, `description`, `teachers_usernames`, `students_usernames` and  `messages`.

```
{
  "title": "Class 9",
  "description": "My new description"
}
```

##### Response `200`

A json object for the updated classroom with `ok`, `_id`, `title`, `description`, `teachers_usernames`, `students_usernames`, `messages`, `created_at` and `updated_at`.

```
{
  "ok": true,
  "class": {
    "_id": ObjectId("5f9ed5ce47c42738d03d178d")
    "title": "Class 9",
    "description": "My new description",
    "teachers_usernames": ["BurtonCha"],
    "students_usernames": ["fisherAi", "BoydH", "jaoBel" ],
    "messages": [
                  {
                    title: "first message",
                    description: "This is the fist message for this class",
                    author_username: "izaakL"
                  }
                ],
    "created_at": "2025-05-05T10:00:00Z" 
    "updated_at": "2025-07-05T10:00:00Z" 
  }
}
```

#### Delete a classroom

**`DELETE /api/classrooms/:id`**

##### Response `200`

A json object for the deleted meeting with `message`.

```
{
  "message": "The classroom was successfully deleted."
}
```

#### For users with role  `admin`: Get a list of all the classrooms

**`GET /api/classrooms/`**

##### Response `200`

A json object with `ok` and an array of `classrooms`.

```
{
  "ok": true,
  "classrooms": [
          {
          "_id": ObjectId("5f9ed5ce47c42738d03d178d")
          "title": "Class 8",
          "description": "My class 8",
          "teachers_usernames": ["teacher1", "teacher2"],
          "students_usernames": ["fisherAi", "BoydH", "jaoBel" ],
          "messages": [
                        {
                          title: "first message",
                          description: "This is the fist message for this class",
                          author_username: "teacher1"
                        }
                      ],
          "created_at": "2025-05-05T10:00:00Z" 
          "updated_at": "2025-07-05T10:00:00Z" 
        },
        {
          "_id": ObjectId("5f9ed5ce47c4558d03d178d")
          "title": "Class 10",
          "description": "My new description",
          "teachers_usernames": ["teacher4"],
          "students_usernames": ["fisherAi", "BoydH", "jaoBel" ],
          "messages": [
                        {
                          title: "first message",
                          description: "This is the fist message for this class",
                          author_username: "teacher4"
                        }
                      ],
          "created_at": "2025-05-05T10:00:00Z" 
          "updated_at": "2025-07-05T10:00:00Z" 
        },
        {
          "_id": ObjectId("5f9ed5ce47c42738d03d178d")
          "title": "Class 9",
          "description": "My new description",
          "teachers_usernames": ["BurtonCha"],
          "students_usernames": ["fisherAi", "BoydH", "jaoBel" ],
          "messages": [
                        {
                          title: "first message",
                          description: "This is the fist message for this class",
                          author_username: "izaakL"
                        }
                      ],
          "created_at": "2025-05-05T10:00:00Z" 
          "updated_at": "2025-07-05T10:00:00Z" 
        }
      ]
}

```
#### For users with role  `admin`: Get a list of all the students in a  classrooms

**`GET /api/classrooms/:id/students`**

##### Response `200`

A json object with `ok` and an array of `students` for that specific classroom.
(I was thinking about returning just an array with students usernames)

```
{
  "ok": true,
  "students": [
      {
        "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
        "username": "jaoBel",
        "email": "jao@example.com",
        "name": "Jao",
        "lastName": "Bell",
        "role": "student",
        "gender": "masculine"
        "mom_name": "Lisa",
        "mom_lastName": "Addams",
        "phone": "+xx xxx xx xx xx",
        "created_at": "2025-01-05T14:30:00Z"
        "updated_at": "2025-05-05T14:30:00Z"
        "last_connection": "2025-07-05T14:30:00Z"
      },
      {
        "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
        "username": "BoydH",
        "email": "harold@example.com",
        "name": "Harold",
        "lastName": "Boyd",
        "role": "student",
        "gender": "masculine"
        "dad_name": "Carl",
        "dad_lastName": "Boyd",
        "phone": "+xx xxx xx xx xx",
        "created_at": "2025-01-05T14:30:00Z"
        "updated_at": "2025-05-05T14:30:00Z"
        "last_connection": "2025-07-05T14:30:00Z"
      },
      {
        "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
        "username": "fisherAi",
        "email": "aiesha@example.com",
        "name": "Aiesha",
        "lastName": "Fischer",
        "role": "student",
        "gender": "feminine"
        "dad_name": "Natan",
        "dad_lastName": "Fischer",
        "phone": "+xx xxx xx xx xx",
        "created_at": "2025-01-05T14:30:00Z"
        "updated_at": "2025-05-05T14:30:00Z"
        "last_connection": "2025-07-05T14:30:00Z"
      },
  ]
}

```

#### For users with role  `admin`: Get a list of all the teachers in a  classrooms

**`GET /api/classrooms/:id/teachers`**

##### Response `200`

A json object with `ok` and an array of `teachers` for that specific classroom.
(I was thinking about returning just an array with teachers usernames)

```
{
  "ok": true,
   [
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "larizaak",
      "email": "izaak@example.com",
      "name": "Isaak",
      "lastName": "Larsen",
      "role": "teacher",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-04-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
    },
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "keziaT",
      "email": "kezia@example.com",
      "name": "Kezia",
      "lastName": "Townsend",
      "role": "teacher",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-04-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
    },
    {
      "_id": ObjectId("5f9ed5ce47c42738d03d178d"),
      "username": "BurtonCha",
      "email": "Charlton@example.com",
      "name": "Charlton",
      "lastName": "Burton",
      "role": "teacher",
      "phone": "+xx xxx xx xx xx",
      "created_at": "2025-04-05T14:30:00Z"
      "updated_at": "2025-05-05T14:30:00Z"
    },
  ]
}

```

### **MESSAGES** | `message`

| field                     | data type | metadata                                    |
| :-----------------------  | :-------- | :------------------------------------------ |
| _id                       | uuid      | generated by database                       |
| author_username           | string    | required                                    |
| description               | string    | required                                    |
| title                     | string    | required                                    |
| created_at                | datetime  | generated by database                       |
| updated_at                | datetime  | generated by database                       |